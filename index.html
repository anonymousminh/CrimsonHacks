<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MarsCam MVP</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/vision_bundle.js" crossorigin="anonymous"></script>
</head>
<body>
  <div id="container">
    <video id="webcam" autoplay style="display: none;"></video>
    <canvas id="canvas"></canvas>
    
    <!-- Control Panel -->
    <div id="controlPanel" class="control-panel">
      <div class="control-section">
        <h3>Face Mask</h3>
        <div class="toggle-group">
          <button class="mask-toggle active" data-mask="helmet">ðŸª– Helmet</button>
          <button class="mask-toggle" data-mask="alien">ðŸ‘½ Alien</button>
        </div>
      </div>
      <div class="control-section">
        <h3>Background</h3>
        <div class="toggle-group">
          <button class="bg-toggle active" data-bg="space-station">ðŸš€ Space Station</button>
          <button class="bg-toggle" data-bg="mars">ðŸ”´ Mars</button>
          <button class="bg-toggle" data-bg="fly-through-space">âœ¨ Fly Through Space</button>
        </div>
      </div>
    </div>

    <!-- Meet Martian Girlfriend Button -->
    <button id="martianButton" class="martian-button">ðŸ‘½ Meet Martian Girlfriend</button>

    <!-- Martian Girlfriend Modal -->
    <div id="martianModal" class="martian-modal">
      <div class="martian-modal-content">
        <span class="martian-close">&times;</span>
        <img id="martianImage" src="Martian_Elegance_at_Twilight.png" alt="Martian Girlfriend" />
      </div>
    </div>

    <!-- Customization Panel -->
    <div id="customizationPanel" class="customization-panel">
      <div class="customization-section" id="helmetCustomization">
        <h3>ðŸª– Customize Helmet</h3>
        <div class="customization-group">
          <div class="option-group">
            <label>Helmet Color:</label>
            <div class="color-options">
              <button class="color-option active" data-color="white" style="background: #ffffff;"></button>
              <button class="color-option" data-color="silver" style="background: #c0c0c0;"></button>
              <button class="color-option" data-color="blue" style="background: #4169e1;"></button>
            </div>
          </div>
          <div class="option-group">
            <label>Helmet Style:</label>
            <div class="style-options">
              <button class="style-option active" data-style="classic">Classic</button>
              <button class="style-option" data-style="modern">Modern</button>
              <button class="style-option" data-style="battle">Battle</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="customization-section" id="alienCustomization">
        <h3>ðŸ‘½ Customize Alien</h3>
        <div class="customization-group">
          <div class="option-group">
            <label>Alien Color:</label>
            <div class="color-options">
              <button class="color-option active" data-color="green" style="background: #00ff00;"></button>
              <button class="color-option" data-color="blue" style="background: #0080ff;"></button>
              <button class="color-option" data-color="purple" style="background: #8000ff;"></button>
              <button class="color-option" data-color="pink" style="background: #ff0080;"></button>
            </div>
          </div>
          <div class="option-group">
            <label>Alien Style:</label>
            <div class="style-options">
              <button class="style-option active" data-style="classic">Classic</button>
              <button class="style-option" data-style="cute">Cute</button>
              <button class="style-option" data-style="scary">Scary</button>
            </div>
          </div>
        </div>
      </div>
      <div class="control-section">
        <button id="capturePhotoBtn" style="width:100%;margin-top:8px;">ðŸ“¸ Capture Photo & Send</button>
      </div>
    </div>
  </div>
  <!-- Email Modal Dialog -->
  <div id="emailModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:200; align-items:center; justify-content:center;">
    <form id="emailForm" style="background:#272727; padding:32px 24px; border-radius:12px; min-width:300px; width:90%; max-width:370px; margin:auto; display:flex; flex-direction:column; gap:16px; align-items:stretch; box-shadow:0 6px 32px #000a;">
      <label for="emailInput" style="color:#ff6b35;font-size:1em; font-weight:bold;">Recipient Email(s):</label>
      <input type="email" id="emailInput" name="email" placeholder="mom@email.com, dad@email.com" style="padding:8px;font-size:1em; border-radius:4px; border:1px solid #999;" required />
      <label for="templateSelect" style="color:#ff6b35; font-size:1em;">Email Template:</label>
      <select id="templateSelect" name="templateSelect" style="padding:8px; font-size:1em; border-radius:4px; border:1px solid #999;">
        <option value="template_jc2z5ke">Send to Mom</option>
        <option value="template_birthday">Send to Dad</option>
      </select>
      <div style="display:flex; gap:12px; justify-content:flex-end;">
        <button type="button" id="cancelEmailModal" style="padding:8px 20px; background:#778; color:white; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
        <button type="submit" style="padding:8px 20px; background:#ff6b35; color:white; border:none; border-radius:4px; font-weight:bold; cursor:pointer;">Send</button>
      </div>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.0.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils"></script>
  <script src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</body>
</html>